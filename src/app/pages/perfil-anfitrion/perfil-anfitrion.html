<div class="profile-container">
  <!-- Header -->
  <div class="profile-header">
    <button class="icon-button" (click)="onBackClick()">
      <span class="material-icons">close</span>
    </button>
    <h1>Perfil</h1>
    <div class="spacer"></div>
  </div>

  <!-- Profile Content -->
  <div class="profile-content" *ngIf="userData && perfilAnfitrion">
    <!-- Profile Picture and Basic Info -->
    <div class="profile-main">
      <div class="profile-picture">
        <div class="avatar-placeholder" *ngIf="!userData.fotoUrl">
          <span class="material-icons">person</span>
        </div>
        <img *ngIf="userData.fotoUrl" [src]="userData.fotoUrl" alt="Foto de perfil" class="profile-image">
      </div>

      <div class="profile-info-card">
        <div class="info-section">
          <h3>Nombre Anfitrión</h3>
          <p class="info-value">{{ userData.nombre }}</p>
        </div>

        <div class="info-section">
          <h3>Teléfono</h3>
          <p class="info-value">{{ userData.telefono }}</p>
        </div>

        <div class="info-section">
          <h3>Email</h3>
          <p class="info-value">{{ userData.email }}</p>
        </div>

        <div class="action-buttons">
          <button class="btn-action btn-edit" (click)="onEditClick()">
            Editar Perfil
          </button>
          <button class="btn-action btn-password" (click)="onChangePasswordClick()">
            Cambiar contraseña
          </button>
        </div>
      </div>
    </div>

    <!-- Description Section -->
    <div class="description-section">
      <h2>Descripción</h2>
      <p class="description-text">{{ perfilAnfitrion.descripcion }}</p>
    </div>

    <!-- Legal Documents Section -->
    <div class="documents-section">
      <h2>Documentos Legales</h2>
      <div class="documents-list" *ngIf="perfilAnfitrion.documentosLegales && perfilAnfitrion.documentosLegales.length > 0">
        <div class="document-item" *ngFor="let documento of perfilAnfitrion.documentosLegales; let i = index">
          <span class="material-icons document-icon">description</span>
          <a [href]="documento" target="_blank" class="document-link">
            {{ obtenerNombreDocumento(documento) }}
          </a>
        </div>
      </div>
      <p class="no-documents" *ngIf="!perfilAnfitrion.documentosLegales || perfilAnfitrion.documentosLegales.length === 0">
        No hay documentos legales registrados
      </p>
    </div>
  </div>

  <!-- No Profile Message -->
  <div class="no-profile" *ngIf="userData && !perfilAnfitrion">
    <span class="material-icons no-profile-icon">person_off</span>
    <p>No tienes un perfil de anfitrión configurado</p>
    <button class="btn-create-profile" (click)="onEditClick()">
      Crear Perfil de Anfitrión
    </button>
  </div>
</div>

<!-- Modals -->
<app-editar-perfil-anfitrion-modal
  *ngIf="showEditModal && userData && perfilAnfitrion"
  [userData]="userData"
  [perfilAnfitrion]="perfilAnfitrion"
  (close)="onCloseEditModal()"
  (save)="onSaveProfile($event)">
</app-editar-perfil-anfitrion-modal>

<app-cambiar-contrasena-modal
  *ngIf="showPasswordModal"
  (close)="onClosePasswordModal()"
  (save)="onSavePassword($event)">
</app-cambiar-contrasena-modal>
