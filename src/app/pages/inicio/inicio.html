<app-empty-header></app-empty-header>

<!-- Contenido principal -->
<div class="container-fluid py-5" style="background-color: #E8F5E9; min-height: calc(100vh - 200px);">
  <div class="row justify-content-center">
    <!-- Sección de Registro -->
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Registrarse</h5>
        </div>
        <div class="card-body">
          <form (ngSubmit)="registrar()">
            <!-- Nombre -->
            <div class="mb-3">
              <label class="form-label">Nombre</label>
              <input 
                type="text" 
                class="form-control" 
                placeholder="Ingrese su nombre"
                [(ngModel)]="registroData.nombre"
                name="nombre"
                required>
            </div>

            <!-- Correo electrónico -->
            <div class="mb-3">
              <label class="form-label">Correo electrónico</label>
              <input 
                type="email" 
                class="form-control" 
                placeholder="Ingrese su correo electrónico"
                [(ngModel)]="registroData.email"
                name="email"
                required>
            </div>

            <!-- Selección de rol -->
            <div class="mb-3">
              <label class="form-label">Elija el rol con el que desea registrarte</label>
              <div class="d-flex gap-2">
                <button 
                  type="button" 
                  class="btn flex-fill"
                  [class.btn-success]="registroData.rol === 'Usuario'"
                  [class.btn-outline-secondary]="registroData.rol !== 'Usuario'"
                  (click)="seleccionarRol('Usuario')">
                  Usuario
                </button>
                <button 
                  type="button" 
                  class="btn flex-fill"
                  [class.btn-success]="registroData.rol === 'Anfitrion'"
                  [class.btn-outline-secondary]="registroData.rol !== 'Anfitrion'"
                  (click)="seleccionarRol('Anfitrion')">
                  Anfitrión
                </button>
              </div>
            </div>

            <!-- Contraseña -->
            <div class="mb-3">
              <label class="form-label">Contraseña</label>
              <input 
                type="password" 
                class="form-control" 
                placeholder="Ingrese la contraseña que desea"
                [(ngModel)]="registroData.password"
                name="password"
                required>
            </div>

            <!-- Teléfono -->
            <div class="mb-3">
              <label class="form-label">Teléfono</label>
              <input 
                type="tel" 
                class="form-control" 
                placeholder="Ingrese su número de teléfono"
                [(ngModel)]="registroData.telefono"
                name="telefono"
                required>
            </div>

            <!-- Fecha de nacimiento -->
            <div class="mb-3">
              <label class="form-label">Fecha de nacimiento</label>
              <input 
                type="date" 
                class="form-control" 
                placeholder="Selecciona una fecha"
                [(ngModel)]="registroData.fechaNacimiento"
                name="fechaNacimiento"
                required>
            </div>

            <!-- Botón de registro -->
            <button type="submit" class="btn btn-success w-100">Registrar</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Sección de Iniciar Sesión -->
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Iniciar Sesión</h5>
        </div>
        <div class="card-body">
          <form (ngSubmit)="iniciarSesion()">
            <!-- Correo electrónico -->
            <div class="mb-3">
              <label class="form-label">Correo electrónico</label>
              <input 
                type="email" 
                class="form-control" 
                placeholder="Ingrese su correo electrónico"
                [(ngModel)]="loginData.email"
                name="loginEmail"
                required>
            </div>

            <!-- Contraseña -->
            <div class="mb-3">
              <label class="form-label">Contraseña</label>
              <input 
                type="password" 
                class="form-control" 
                placeholder="Ingrese su contraseña"
                [(ngModel)]="loginData.password"
                name="loginPassword"
                required>
            </div>

            <!-- Enlace olvidaste tu contraseña -->
            <div class="mb-3 text-center">
              <a href="javascript:void(0)" class="text-success" (click)="abrirModalRecuperar()">
                ¿Olvidaste tu contraseña?
              </a>
            </div>

            <!-- Botón de ingreso -->
            <button type="submit" class="btn btn-success w-100">Ingresar</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Recuperar Contraseña -->
<div class="modal fade" [class.show]="showModal" [style.display]="showModal ? 'block' : 'none'" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header border-0">
        <h5 class="modal-title">Recuperar contraseña</h5>
        <button type="button" class="btn-close" (click)="cerrarModal()"></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="establecerPassword()">
          <!-- Información -->
          <p class="text-muted small">Se ha enviado a su correo electrónico un código de verificación</p>
          
          <!-- Código -->
          <div class="mb-3">
            <label class="form-label">Código</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="Código"
              [(ngModel)]="recuperarData.codigo"
              name="codigo"
              required>
            <small class="text-muted">El código se vence en 15min</small>
          </div>

          <!-- Botón reenviar código -->
          <div class="mb-3">
            <button type="button" class="btn btn-info w-100" (click)="reenviarCodigo()">
              Reenviar código
            </button>
          </div>

          <!-- Nueva contraseña -->
          <div class="mb-3">
            <label class="form-label">Nueva contraseña</label>
            <input 
              type="password" 
              class="form-control" 
              placeholder="Nueva contraseña"
              [(ngModel)]="recuperarData.nuevaPassword"
              name="nuevaPassword"
              required>
          </div>

          <!-- Botón establecer contraseña -->
          <button type="submit" class="btn btn-success w-100">
            Establecer contraseña
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Backdrop del modal -->
<div class="modal-backdrop fade" [class.show]="showModal" *ngIf="showModal" (click)="cerrarModal()"></div>

<app-footer></app-footer>