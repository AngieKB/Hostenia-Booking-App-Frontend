<div class="modal-overlay" (click)="onClose()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="modal-header">
      <h2>Comentar y Calificar</h2>
      <button class="close-button" (click)="onClose()">
        <span class="material-icons">close</span>
      </button>
    </div>

    <!-- Form -->
    <form (ngSubmit)="onSubmit()" class="modal-form">
      <!-- Calificación -->
      <div class="form-group">
        <label for="calificacion">Calificar</label>
        <div class="rating-stars">
          <button 
            type="button"
            class="star-btn" 
            *ngFor="let star of [1, 2, 3, 4, 5]"
            (click)="setCalificacion(star)">
            <i class="bi" 
               [class.bi-star-fill]="star <= calificacion" 
               [class.bi-star]="star > calificacion"
               style="font-size: 32px;"></i>
          </button>
        </div>
        <p class="calificacion-texto" *ngIf="calificacion > 0">
          <strong>{{ calificacion }}</strong> {{ calificacion === 1 ? 'estrella' : 'estrellas' }}
        </p>
        <p class="calificacion-texto" *ngIf="calificacion === 0">
          <em>Selecciona una calificación (1-5 estrellas)</em>
        </p>
      </div>

      <!-- Descripción -->
      <div class="form-group">
        <label for="comentario">Descripción</label>
        <textarea
          id="comentario"
          name="comentario"
          [(ngModel)]="comentario"
          placeholder="Comentario (máx 500 caracteres)"
          maxlength="500"
          rows="6"
          required
          class="form-textarea"
        ></textarea>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="submit-button">
        Aceptar cambios
      </button>
    </form>
  </div>
</div>
